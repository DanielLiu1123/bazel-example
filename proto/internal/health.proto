syntax = "proto3";

package internal;

import "proto/common/types.proto";

option java_package = "com.example.internal";
option java_outer_classname = "HealthProto";
option go_package = "github.com/example/bazel-example/proto/internal";

// Health status
enum HealthStatus {
  HEALTH_STATUS_UNSPECIFIED = 0;
  HEALTH_STATUS_HEALTHY = 1;
  HEALTH_STATUS_DEGRADED = 2;
  HEALTH_STATUS_UNHEALTHY = 3;
  HEALTH_STATUS_UNKNOWN = 4;
}

// Service health check
message ServiceHealth {
  string service_name = 1;
  string instance_id = 2;
  HealthStatus status = 3;
  string message = 4;
  map<string, string> details = 5;
  common.Timestamp last_check = 6;
  common.Timestamp started_at = 7;
}

// Dependency health
message DependencyHealth {
  string name = 1;
  string type = 2; // database, cache, external_api, etc.
  HealthStatus status = 3;
  string endpoint = 4;
  double response_time_ms = 5;
  string error_message = 6;
  common.Timestamp last_check = 7;
}

// Overall system health
message SystemHealth {
  HealthStatus overall_status = 1;
  repeated ServiceHealth services = 2;
  repeated DependencyHealth dependencies = 3;
  common.Timestamp timestamp = 4;
}
